"use strict";define("ec-prioritised/app",["exports","ember","ec-prioritised/resolver","ember-load-initializers","ec-prioritised/config/environment"],function(e,t,i,r,n){Object.defineProperty(e,"__esModule",{value:!0});var a=void 0;t.default.MODEL_FACTORY_INJECTIONS=!0,a=t.default.Application.extend({modulePrefix:n.default.modulePrefix,podModulePrefix:n.default.podModulePrefix,Resolver:i.default}),(0,r.default)(a,n.default.modulePrefix),e.default=a}),define("ec-prioritised/components/display-item/component",["exports","ember-component"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({tagName:"li",item:null,isShowingChildren:!1,didInsertElement:function(){this.get("item").startShowing()},willDestroyElement:function(){this.get("item").stopShowing()}})}),define("ec-prioritised/components/display-item/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"0t1CDvbq",block:'{"statements":[[11,"h2",[]],[13],[1,[28,["item","label"]],false],[14],[0,"\\n\\n"],[11,"div",[]],[15,"class","tasks"],[13],[0,"\\n  "],[11,"div",[]],[16,"class",[34,["task-display is-",[28,["item","taskA","state"]]]]],[13],[0,"\\n    A\\n  "],[14],[0,"\\n  "],[11,"div",[]],[16,"class",[34,["task-display is-",[28,["item","taskB","state"]]]]],[13],[0,"\\n    B\\n  "],[14],[0,"\\n  "],[11,"div",[]],[16,"class",[34,["task-display is-",[28,["item","taskC","state"]]]]],[13],[0,"\\n    C\\n  "],[14],[0,"\\n"],[14],[0,"\\n\\n\\n"],[6,["if"],[[28,["isShowingChildren"]]],null,{"statements":[[0,"  "],[11,"a",[]],[15,"href","#"],[16,"onclick",[33,["action"],[[28,[null]],[33,["mut"],[[28,["isShowingChildren"]]],null],false],null],null],[13],[0,"- Hide children"],[14],[0,"\\n  "],[11,"ul",[]],[13],[0,"\\n"],[6,["each"],[[28,["item","children"]]],null,{"statements":[[0,"      "],[1,[33,["display-item"],null,[["item"],[[28,["child"]]]]],false],[0,"\\n"]],"locals":["child"]},null],[0,"  "],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"  "],[11,"a",[]],[15,"href","#"],[16,"onclick",[33,["action"],[[28,[null]],[33,["mut"],[[28,["isShowingChildren"]]],null],true],null],null],[13],[0,"+ Show children"],[14],[0,"\\n"]],"locals":[]}]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"ec-prioritised/components/display-item/template.hbs"}})}),define("ec-prioritised/helpers/app-version",["exports","ember","ec-prioritised/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,i,r){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.hideSha?a.match(r.versionRegExp)[0]:t.hideVersion?a.match(r.shaRegExp)[0]:a}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=n;var a=i.default.APP.version;e.default=t.default.Helper.helper(n)}),define("ec-prioritised/helpers/cancel-all",["exports","ember","ember-concurrency/-helpers"],function(e,t,i){function r(e){var r=e[0];return r&&"function"==typeof r.cancelAll||t.default.assert("The first argument passed to the `cancel-all` helper should be a Task or TaskGroup (without quotes); you passed "+r,!1),(0,i.taskHelperClosure)("cancelAll",[r,n])}Object.defineProperty(e,"__esModule",{value:!0}),e.cancelHelper=r;var n="the 'cancel-all' template helper was invoked";e.default=t.default.Helper.helper(r)}),define("ec-prioritised/helpers/perform",["exports","ember","ember-concurrency/-helpers"],function(e,t,i){function r(e,t){return(0,i.taskHelperClosure)("perform",e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.performHelper=r,e.default=t.default.Helper.helper(r)}),define("ec-prioritised/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("ec-prioritised/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("ec-prioritised/helpers/task",["exports","ember"],function(e,t){function i(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(e){return Array.isArray(e)?e:Array.from(e)}function n(e){var t=r(e),n=t[0],a=t.slice(1);return n._curry.apply(n,i(a))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Helper.helper(n)}),define("ec-prioritised/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","ec-prioritised/config/environment"],function(e,t,i){Object.defineProperty(e,"__esModule",{value:!0});var r=i.default.APP,n=r.name,a=r.version;e.default={name:"App Version",initialize:(0,t.default)(n,a)}}),define("ec-prioritised/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0];e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("ec-prioritised/initializers/data-adapter",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"data-adapter",before:"store",initialize:function(){}}}),define("ec-prioritised/initializers/ember-concurrency",["exports","ember-concurrency"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-concurrency",initialize:function(){}}}),define("ec-prioritised/initializers/ember-data",["exports","ember-data/setup-container","ember-data/index"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("ec-prioritised/initializers/export-application-global",["exports","ember","ec-prioritised/config/environment"],function(e,t,i){function r(){var e=arguments[1]||arguments[0];if(!1!==i.default.exportApplicationGlobal){var r;if("undefined"!=typeof window)r=window;else if("undefined"!=typeof global)r=global;else{if("undefined"==typeof self)return;r=self}var n,a=i.default.exportApplicationGlobal;n="string"==typeof a?a:t.default.String.classify(i.default.modulePrefix),r[n]||(r[n]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete r[n]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=r,e.default={name:"export-application-global",initialize:r}}),define("ec-prioritised/initializers/injectStore",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"injectStore",before:"store",initialize:function(){}}}),define("ec-prioritised/initializers/store",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"store",after:"ember-data",initialize:function(){}}}),define("ec-prioritised/initializers/transforms",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"transforms",before:"store",initialize:function(){}}}),define("ec-prioritised/instance-initializers/ember-data",["exports","ember-data/-private/instance-initializers/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("ec-prioritised/models/item",["exports","ember-object","ember-computed","ember-concurrency"],function(e,t,i,r){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.extend({parent:null,group:null,children:(0,i.default)("depth",function(){var e=this,t=this.get("depth");return Array.from({length:10*t}).map(function(t,i){return n.create({id:i,parent:e,group:e.get("group")})})}),depth:(0,i.default)("parent",function(){var e=this.get("parent");return e?e.get("depth")+1:1}),label:(0,i.default)("id","parent.label",function(){var e=this.get("parent.label");return e?e+=".":e="Item ",""+e+this.get("id")}),startShowing:function(){this.get("_isCompleteA")||this.get("taskA").perform(1e3),this.get("_isCompleteB")||this.get("taskB").perform(2e3),this.get("_isCompleteC")||this.get("taskC").perform(3e3)},stopShowing:function(){this.get("taskA").cancelAll(),this.get("taskB").cancelAll(),this.get("taskC").cancelAll()},taskA:(0,r.task)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.timeout)(1e3*Math.random());case 2:this.set("_isCompleteA",!0);case 3:case"end":return e.stop()}},e,this)})).group("group"),taskB:(0,r.task)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.timeout)(5e3*Math.random());case 2:this.set("_isCompleteB",!0);case 3:case"end":return e.stop()}},e,this)})).group("group"),taskC:(0,r.task)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<100)){e.next=8;break}return e.next=4,(0,r.timeout)(50*Math.random());case 4:this.set("countTaskC");case 5:t++,e.next=1;break;case 8:this.set("_isCompleteC",!0);case 9:case"end":return e.stop()}},e,this)})).group("group")});e.default=n}),define("ec-prioritised/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("ec-prioritised/router",["exports","ember","ec-prioritised/config/environment"],function(e,t,i){Object.defineProperty(e,"__esModule",{value:!0});var r=t.default.Router.extend({location:i.default.locationType,rootURL:i.default.rootURL});r.map(function(){this.route("routes",{path:"/"},function(){this.route("default"),this.route("prioritised")})}),e.default=r}),define("ec-prioritised/routes/default/route",["exports","ember-route","ec-prioritised/models/item","ember-concurrency"],function(e,t,i,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({group:(0,r.taskGroup)().maxConcurrency(2),model:function(){var e=this;return Array.from({length:3}).map(function(t,r){return i.default.create({id:r,group:e.get("group")})})}})}),define("ec-prioritised/routes/default/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"In1crZyt",block:'{"statements":[[11,"h1",[]],[13],[0,"Standard "],[11,"code",[]],[13],[0,"ember-concurrency"],[14],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  Below is a list of items. Each item kicks off three tasks when it is visible and the\\n  tasks change colour as they proceed (from "],[11,"div",[]],[15,"class","task-display is-queued is-inline"],[13],[0,"queued"],[14],[0,"\\n  to "],[11,"div",[]],[15,"class","task-display is-running is-inline"],[13],[0,"running"],[14],[0," to\\n  "],[11,"div",[]],[15,"class","task-display is-idle is-inline"],[13],[0,"idle"],[14],[0,").\\n"],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  You can show children of any item and at each level of children you get 10 * more. This allows you\\n  to simulate load on the system.\\n"],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  Notice how each item\'s tasks complete in order. We actually want all of the A\'s to complete first, then\\n  all of the B\'s and then all of the C\'s.\\n"],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  Enter "],[6,["link-to"],["routes.prioritised"],null,{"statements":[[11,"code",[]],[13],[0,"enqueueWithPriority"],[14]],"locals":[]},null],[0,"\\n"],[14],[0,"\\n\\n"],[11,"ul",[]],[13],[0,"\\n"],[6,["each"],[[28,["model"]]],null,{"statements":[[0,"    "],[1,[33,["display-item"],null,[["item"],[[28,["item"]]]]],false],[0,"\\n"]],"locals":["item"]},null],[14]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"ec-prioritised/routes/default/template.hbs"}})}),define("ec-prioritised/routes/index/route",["exports","ember-route"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({})}),define("ec-prioritised/routes/index/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"NQuTL9r/",block:'{"statements":[[11,"h1",[]],[13],[0,"ember-concurrency"],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  This app shows a reproduction of a problem we have in our production code.\\n  We "],[11,"code",[]],[13],[0,"perform"],[14],[0," a large number of "],[11,"code",[]],[13],[0,"ember-concurrency"],[14],[0,"\\n  "],[11,"code",[]],[13],[0,"task"],[14],[0,"s (which lead to AJAX requests) and we want these to\\n  happen in a prioritised manner.\\n"],[14],[0,"\\n\\n"],[11,"ul",[]],[13],[0,"\\n  "],[11,"li",[]],[13],[6,["link-to"],["routes.default"],null,{"statements":[[0,"Standard implementation"]],"locals":[]},null],[14],[0,"\\n  "],[11,"li",[]],[13],[6,["link-to"],["routes.prioritised"],null,{"statements":[[0,"Prioritised implementation"]],"locals":[]},null],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"ec-prioritised/routes/index/template.hbs"}})}),define("ec-prioritised/routes/prioritised/route",["exports","ember-route","ec-prioritised/models/item","ember-concurrency"],function(e,t,i,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=t.default.extend({group:(0,r.taskGroup)().maxConcurrency(2).enqueueWithPriority(function(e,t){return n(e.args,1)[0]-n(t.args,1)[0]-(e.context.get("depth")-t.context.get("depth"))}),model:function(){var e=this;return Array.from({length:3}).map(function(t,r){return i.default.create({id:r,group:e.get("group")})})}})}),define("ec-prioritised/routes/prioritised/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"hC1OxivC",block:'{"statements":[[11,"h1",[]],[13],[0,"Prioritised "],[11,"code",[]],[13],[0,"ember-concurrency"],[14],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  Below is a list of items. Each item kicks off three tasks when it is visible and the\\n  tasks change colour as they proceed (from "],[11,"div",[]],[15,"class","task-display is-queued is-inline"],[13],[0,"queued"],[14],[0,"\\n  to "],[11,"div",[]],[15,"class","task-display is-running is-inline"],[13],[0,"running"],[14],[0," to\\n  "],[11,"div",[]],[15,"class","task-display is-idle is-inline"],[13],[0,"idle"],[14],[0,").\\n"],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  You can show children of any item and at each level of children you get 10 * more. This allows you\\n  to simulate load on the system.\\n"],[14],[0,"\\n\\n"],[11,"p",[]],[13],[0,"\\n  Notice how all of the A\'s to complete first, then all of the B\'s and then all of the C\'s. Additionally we\\n  weight it by the depth of an item so all of the A\'s in the deepest nested children complete before those\\n  in their ancestors (assuming the ancestors hadn\'t already started loading before you opened the children)\\n"],[14],[0,"\\n\\n"],[11,"ul",[]],[13],[0,"\\n"],[6,["each"],[[28,["model"]]],null,{"statements":[[0,"    "],[1,[33,["display-item"],null,[["item"],[[28,["item"]]]]],false],[0,"\\n"]],"locals":["item"]},null],[14]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"ec-prioritised/routes/prioritised/template.hbs"}})}),define("ec-prioritised/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ec-prioritised/config/environment",["ember"],function(e){try{var t="ec-prioritised/config/environment",i=document.querySelector('meta[name="'+t+'"]').getAttribute("content"),r=JSON.parse(unescape(i)),n={default:r};return Object.defineProperty(n,"__esModule",{value:!0}),n}catch(e){throw new Error('Could not read config from meta tag with name "'+t+'".')}}),runningTests||require("ec-prioritised/app").default.create({name:"ec-prioritised",version:"0.0.0+651f4360"});